{% extends 'todo/base.html' %} {% block content %}
<div class="row">
  <div class="col-md-8 offset-md-2">
    <h2 class="mb-4">Your Tasks</h2>

    <a href="{% url 'task-create' %}" class="btn btn-primary mb-3"
      >Add New Task</a
    >

    <div class="list-group">
      {% for task in tasks %}
      <div
        class="list-group-item {% if task.status == 'complete' %}list-group-item-success{% endif %}"
      >
        <div class="d-flex w-100 justify-content-between">
          <h5 class="mb-1">
            {{ task.title }} {% if task.status == 'complete' %}
            <span class="badge bg-success ms-2">Completed</span>
            {% else %}
            <span class="badge bg-warning text-dark ms-2">Pending</span>
            {% endif %}
          </h5>
          <small>{{ task.created_at|date:"M d, Y" }}</small>
        </div>
        <p class="mb-1">{{ task.description }}</p>
        <div class="mt-2">
          <a
            href="{% url 'task-update' task.pk %}"
            class="btn btn-sm btn-outline-secondary"
            >Edit</a
          >
          <a
            href="{% url 'task-delete' task.pk %}"
            class="btn btn-sm btn-outline-danger"
            >Delete</a
          >
          <form
            method="post"
            action="{% url 'task-update' task.pk %}"
            class="d-inline"
          >
            {% csrf_token %} {% if task.status == 'incomplete' %}
            <input type="hidden" name="status" value="complete" />
            <button type="submit" class="btn btn-sm btn-success">
              <i class="bi bi-check-circle"></i> Mark Complete
            </button>
            {% else %}
            <input type="hidden" name="status" value="incomplete" />
            <button type="submit" class="btn btn-sm btn-warning">
              <i class="bi bi-x-circle"></i> Mark Incomplete
            </button>
            {% endif %}
          </form>
        </div>
      </div>
      {% empty %}
      <div class="alert alert-info">No tasks yet. Create your first task!</div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
